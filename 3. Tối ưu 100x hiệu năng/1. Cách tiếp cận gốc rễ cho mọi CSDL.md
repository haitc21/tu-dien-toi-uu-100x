[Link bài học](https://wecommit.com.vn/courses/chuong-trinh-dao-tao-toi-uu-co-so-du-lieu-cao-cap/lesson/cach-tiep-can-goc-re-cua-toi-uu-trong-moi-loai-co-so-du-lieu-la-gi-video-2h30-phut/)

## Điều quan trọng nhất

- Để 1 câu lệnh nhanh
  - Table
  - Index: CSDL lưu dữ liệu giống như 1 bảng và có liên kết đến bảng. Liên kết như nào tùy theo CSDL: Oracle dùng rowId, SQL Server dùng key.
  - Các thức kết hợp dữ liệu (KOIN)
- Để tổng thể hệ thống nhanh:
  - Từng câu lệnh nhanh.
  - Không để xảy ra "va chạm" (xung đột): Wait, lock.

>Để bắt đầu tối ưu thì bắt đầu từ cách mà CSDL **thực sự** lấy dữ liệu như thế nào (từ index, table hay cả 2).
>
## Nguyên lý tối ưu CSDL

- **Dung lượng** dữ liệu phải láy càng **ÍT** càng tốt. Chứ **KHÔNG PHẢI**  tổng số **bản ghi**.

>VD ban đầu bảng có 1 tỷ bản ghi sau đó delete hết đi thì DUNG LƯỢNG bảng đó còn nguyên nên truy vấn vẫn chậm.
>**NOTE** vào DB chạy câu lệnh thông kế 3 cột: Tên bảng | Số bản ghi | Dung lượng bảng. Sắp xếp theo dung lượng. Không quan trọng đó là hệ CSDL nào. Xem xem có bảng nào bản ghi ít lại dung lượng nhiều (**PHÂN MẢNH**).

- Table lưu trữ dạng Row-based: Tức là khi chỉ cần lấy 1 cột nhưng thực tế CSDL vẫn lấy tất cả hàng. Ngoài ra dữ liệu trong bảng lưu trữ một cách lộn xộn.
- Index cũng giống như 1 table nhỏ nhưng được sắp xếp.Được liên kết vào bảng chính.

>DB chỉ có 3 cách để lấy dữ liệu: 1 vào table, 2 vào index, 3 là lấy cả table và index. **Điều này phụ thuộc vào thuật toán tính cost của DB**.

- Trong DB luôn lưu thông tin Object để quản lý **Statistic** để dưa ra quyết định chiến lược thực thi. Có thể xảy ra vấn đề stats cập nhật sai ví dụ: tabe lưu lịch sử giao dịch và sẽ được đóng sổ (xóa sạch dữ liệu) mỗi ngày, nếu stats cập nhật trước khi xóa thì hôm sau CSDL vẫn nhận định table đó vẫn là bảng có số lượng bản ghi như hôm trước chứ không phải bảng trắn.

>Khi xóa dữ liệu bằng câu lệnh Delete thì CSDL sẽ không dọn dẹp block dữ liệu ngay. Việc này để khi insert dữ liệu mới vào sẽ nhanh hơn và vào đúng block trống mà không cần tạo lại block.
